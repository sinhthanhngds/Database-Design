CREATE TABLE PRODUCTS (
Product_id INT PRIMARY KEY NOT NULL,
Name varchar (50) NOT NULL,
Quantity_in_stock INT DEFAULT '0',
Unit_price DECIMAL (4,2) NOT NULL);

CREATE TABLE SHIPPERS (
Shipper_id INT PRIMARY KEY NOT NULL,
Name VARCHAR (50) NOT NULL);

CREATE TABLE CUSTOMERS (
CustomerID INT PRIMARY KEY NOT NULL,
First_name VARCHAR (50) NOT NULL,
Last_name VARCHAR (50) NOT NULL,
Birth_date DATE CHECK (Birth_date < GETDATE ()),
Phone VARCHAR (11) CHECK (Phone BETWEEN 0 AND 99999999999),
Address VARCHAR (100) NOT NULL,
City VARCHAR (50) NOT NULL,
State VARCHAR (50) NOT NULL,
Points INT NOT NULL DEFAULT '0'
);

CREATE TABLE ORDER_STATUSES(
Order_status_id TINYINT PRIMARY KEY NOT NULL,
Name VARCHAR (50) NOT NULL);

CREATE TABLE ORDERS (
Order_id INT PRIMARY KEY NOT NULL,
Customer_id INT FOREIGN KEY REFERENCES CUSTOMERS(CustomerID) ON UPDATE CASCADE,
Order_date DATE CHECK (Order_date <= GETDATE ()) NOT NULL,
Status TINYINT DEFAULT '1' FOREIGN KEY REFERENCES ORDER_STATUSES (Order_status_id) ON UPDATE CASCADE ,
Comments VARCHAR (2000),
Shipped_date DATE CHECK (Shipped_date <= GETDATE ()),
Shipper_id INT FOREIGN KEY REFERENCES SHIPPERS (Shipper_id) ON UPDATE CASCADE);

CREATE TABLE ORDER_ITEMS (
Order_id INT FOREIGN KEY REFERENCES ORDERS(Order_id) ON UPDATE CASCADE NOT NULL,
Product_id INT FOREIGN KEY REFERENCES PRODUCTS(Product_id) ON UPDATE CASCADE NOT NULL,
Quantity INT NOT NULL,
PRIMARY KEY (Order_id, Product_id)
);




	